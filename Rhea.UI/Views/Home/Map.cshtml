@{
    ViewBag.Title = "地图导航";
}

<link href="@Url.Content("~/Plugins/map/smartmap/base.css")" type="text/css" rel="stylesheet" />
<style type="text/css">
    #mapwraper { position:absolute; top:67px; left:0; right:0; bottom:2px; display:block; }
</style>

<div id="mapwraper">
    <div id="mapFrame" style="position: absolute;width:100%;height:100%;border:1px solid black">加载中...</div>
</div>

@section scripts{
<script src="@Url.Content("~/Plugins/map/smartmap/jquery.mapbox.js")" type="text/javascript" ></script>
<script src="@Url.Content("~/Plugins/map/smartmap/smartmap.js")" type="text/javascript" ></script>
<script type="text/javascript">
    $(function () {
        $('.navbar .nav #nav-map').parent().addClass('active');

        var myAppMap = new FUI.Map("mapFrame", {
            server: "http://smart.jiangnan.edu.cn:8888",
            tag: "estate",
            name: "江南大学",
            initZoom: 3,
            setup: function (config) {
            },
            select: function (ponits) {
                var tag;
                for (tag in ponits) {	//遍历选中标签
                }
            },
            pin: function (config, x, y, zoom) {	//手工标注

            }
        });

        myAppMap.init(function () {
            var tag = 'a';
            var cfg = {
                name: 'bg10001',
                html: '<h3>BG</h3>',
                mapX: 50,
                mapY: 50,
                mapZoom: 3,
                icon: "pin",
                color: "red",
                width: 160,
                active: true,
                fn: function (point, tag) {
                    alert('ok');
                }
            };
            myAppMap.addPoint(tag, cfg);

        }); //加载标注层

        myAppMap.show("normal");
    });
</script>
}