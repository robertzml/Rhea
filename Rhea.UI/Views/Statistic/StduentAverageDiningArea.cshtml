@{
    ViewBag.Title = "生均学生食堂面积";
    Layout = null;
}

@Html.Action("Heading", new { controller = "Common", area = "", title = ViewBag.Title, active = "房产统计" })

<div class="row-fluid">
    <div class="span12">

        <div class="box chart gradient">
            <div class="title">
                <h4>
                    <span class="icon16 icomoon-icon-bars"></span><span>生均学生食堂面积 = 学生食堂面积 / 全日制在校生数</span>
                </h4>
                <a href="#" class="minimize">Minimize</a>
            </div>

            <div class="content">
                <div class="row-fluid">
                    <div class="span12">
                        <div id="container-student-avg-dining-area" style="width: 100%; height: 650px;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script type="text/javascript">
    $(function () {
        var colors = Highcharts.getOptions().colors;

        $.getJSON('/Statistic/StudentAverageData', function (response) {
            setColumnChart(response);
        });

        setBoxAction();      

        function setColumnChart(data) {
            var option = {
                chart: {
                    renderTo: 'container-student-avg-dining-area',
                    type: 'column'
                },
                credits: {
                    enabled: false
                },
                title: {
                    text: '历年生均学生食堂面积'
                },
                xAxis: {
                    categories: []
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: '面积 (m2)'
                    }
                },
                tooltip: {
                    formatter: function () {
                        return this.y + ' m<sup>2</sup>';
                    }
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: "面积",
                    color: colors[4],
                    data: [],
                    dataLabels: {
                        enabled: true,
                        color: '#3E576F'
                    }
                }]
            };

            $.each(data, function (i, item) {
                option.series[0].data.push([item.Year, parseFloat(item.DiningArea)]);
                option.xAxis.categories.push(item.Year);
            });

            var chart1 = new Highcharts.Chart(option);
        }
    });
</script>