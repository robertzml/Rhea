@model List<Rhea.Data.Estate.BuildingClassifyAreaModel>

@{
    ViewBag.Title = "楼群分类用房面积";
    Layout = null;
}

<style type="text/css">
table#classify-table td { text-align:center; }
</style>

<div class="page-header">
    <h3>
        @ViewBag.Title</h3>
</div>

<div class="row-fluid">
    <div class="span12">
        <table id="classify-table" class="table table-bordered">
            <thead>
                <tr>
                    <th>一级分类</th>
                    <th>编码</th>
                    <th>二级分类</th>
                    <th>使用面积 (m<sup>2</sup>)</th>
                    <th>房间数量</th>
                    <th>总使用面积 (m<sup>2</sup>)</th>
                    <th>总房间数量</th>
                </tr>
            </thead>
            <tbody>
            @if (Model.Count != 0)
            {   
            for (int i = 0; i < Model[0].FirstClassify.Count; i++)
            {
                var item = Model[0].FirstClassify[i];
                if (Model[0].FirstClassify[i].SecondClassify.Count == 0)
                {
                    continue;
                }
                <tr>
                    <td rowspan="@item.SecondClassify.Count">
                        @item.Title
                    </td>
                    <td>
                        @string.Format("{0}.{1}", item.SecondClassify[0].FunctionFirstCode, item.SecondClassify[0].FunctionSecondCode)
                    </td>
                    <td>
                        @item.SecondClassify[0].FunctionProperty
                    </td>
                    <td>
                        @Model.Sum(r => r.FirstClassify[i].SecondClassify[0].Area)
                    </td>
                    <td>
                        @Model.Sum(r => r.FirstClassify[i].SecondClassify[0].RoomCount)
                    </td>
                    <td rowspan="@item.SecondClassify.Count">
                        @Model.Sum(r => r.FirstClassify[i].Area)
                    </td>
                    <td rowspan="@item.SecondClassify.Count">
                        @Model.Sum(r => r.FirstClassify[i].RoomCount)
                    </td>
                </tr>
                for (int j = 1; j < item.SecondClassify.Count; j++)
                {
                <tr>
                    <td>
                        @string.Format("{0}.{1}", item.SecondClassify[j].FunctionFirstCode, item.SecondClassify[j].FunctionSecondCode)
                    </td>
                    <td>
                        @item.SecondClassify[j].FunctionProperty
                    </td>
                    <td>
                        @Model.Sum(r => r.FirstClassify[i].SecondClassify[j].Area)
                    </td>
                    <td>
                        @Model.Sum(r => r.FirstClassify[i].SecondClassify[j].RoomCount)
                    </td>
                </tr>
                }
            }
            }
            </tbody>
        </table>
    </div>
</div>