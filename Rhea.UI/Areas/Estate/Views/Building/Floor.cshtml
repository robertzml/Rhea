@model Rhea.Data.Entities.Building

@{
    ViewBag.Title = "楼层信息";
    Layout = null;
}

<div class="box-header well" data-original-title>
    <h2>
        <i class="icon-th-list"></i>楼层信息</h2>
</div>

<div class="box-content">
    <div class="page-header">
        <h1>
            @Model.Name <small>Id: @Model.Id</small></h1>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <h3>
                详细参数</h3>
            <div class="row-fluid">
                <div class="span8">
                    <table class="table table-bordered table-striped" data-bind="with: chosenFloor">
                        <thead>
                            <tr>
                                <th>
                                    属性
                                </th>
                                <th>
                                    值
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    编号
                                </td>
                                <td data-bind="text: number"></td>
                            </tr>
                            <tr>
                                <td>
                                    名称
                                </td>
                                <td data-bind="text: name"></td>
                            </tr>
                            <tr>
                                <td>
                                    建筑面积
                                </td>
                                <td data-bind="text: buildArea">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    使用面积
                                </td>
                                <td data-bind="text: usableArea">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="span4">
                    <div>
                        <span>
                            楼层:</span>
                        <select data-bind="options: floors,
                                optionsText: 'name',
                                value: chosenFloor">                            
                        </select>                        
                    </div>
                    <div class="well">
                        abc
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <h2>
                操作</h2>
            <p>
                <a class="btn" id="edit" href="#"><i class="icon-edit"></i>编辑</a> 
                <a class="btn" id="return" href="#"><i class="icon-arrow-left"></i>返回</a>
            </p>
        </div>
    </div>
</div>

<script src="@Url.Content("~/Areas/Estate/Scripts/floor-model.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {              
        var floorModel = new FloorViewModel();   

        $.each(@Html.Raw(ViewBag.Floors), function(i, item){            
	        floorModel.addFloor(item.Id, item.Number, item.Name, item.BuildArea, item.UsableArea, item.ImageUrl, item.Remark);            
        });

        var f = floorModel.findFloor(@ViewBag.FloorId);
        floorModel.setFloor(f);

        ko.applyBindings(floorModel);     

        $('a#return').click(function() {
            ajaxLoadPage('Details', 'Building', 'Estate', { id: '@Model.Id' });
            return false;
        });   
    });
</script>