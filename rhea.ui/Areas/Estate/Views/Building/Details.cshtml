@model Rhea.Data.Entities.Building

@{
    ViewBag.Title = "楼宇信息";
    Layout = null;
}

<div class="box">
    <div class="box-header well" data-original-title>
        <h2><i class="icon-th-list"></i>楼宇信息</h2>    
    </div>

    <div class="box-content">
        <div class="page-header">
            <h1>
                @Model.Name <small>Id: @Model.Id</small></h1>
        </div>
        <div class="row-fluid">
            <div class="span7">
                <h3>
                    介绍</h3>
                <p>
                    @Model.Remark
                </p>               
            </div>       
            <div class="span5">
                <div class="well">
                    <a id="building-pic" title="@Model.Name" href="@Model.ImageUrl">
                        <img src="@Model.ImageUrl" alt="图片"></a>
                </div>
            </div>
        </div>
    
        <div class="row-fluid">
            <div class="span12">
                <h3>详细参数</h3>
                <div class="row-fluid">
                    <div class="span12">
                        <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th>
                                        属性
                                    </th>
                                    <th>
                                        值
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        @Html.DisplayNameFor(model => model.Name)
                                    </td>
                                    <td>
                                        @Model.Name
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.DisplayNameFor(model => model.BuildArea)
                                    </td>
                                    <td>
                                        @Model.BuildArea
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.DisplayNameFor(model => model.UsableArea)
                                    </td>
                                    <td>
                                        @Model.UsableArea
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.DisplayNameFor(model => model.AboveGroundFloor)
                                    </td>
                                    <td>
                                        @Model.AboveGroundFloor
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.DisplayNameFor(model => model.UnderGroundFloor)
                                    </td>
                                    <td>
                                        @Model.UnderGroundFloor
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>               
                </div>
            </div>
        </div>

        <div class="row-fluid">
            <div class="span12">
                <h3>
                    楼层列表</h3>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>
                                名称
                            </th>
                            <th>
                                编号
                            </th>
                            <th>
                                建筑面积
                            </th>
                            <th>
                                使用面积
                            </th>
                            <th>
                                详细
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                    @foreach (var item in Model.Floors)
                    {
                        <tr>
                            <td>
                                @item.Name
                            </td>
                            <td>
                                @item.Number
                            </td>
                            <td>
                                @item.BuildArea
                            </td>
                            <td>
                                @item.UsableArea
                            </td>
                            <td>
                                <a class="btn btn-success floor-details" href="#" ref="@item.Number">
                                    <i class="icon-zoom-in icon-white"></i>查看 
                                </a>
                            </td>
                        </tr>
                    }
                    </tbody>
                </table>
            </div>
        </div>

        <div class="row-fluid">
            <div class="span12">
                <h3>
                    操作</h3>
                <p>
                    <a class="btn btn-primary" id="return" href="#"><i class="icon-arrow-left icon-white"></i>返回</a>
                </p>
            </div>
        </div>   
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {

        $('a#building-pic').colorbox({ transition: "elastic", maxWidth: "95%", maxHeight: "95%" });

        $('a#return').click(function () {
            ajaxLoadPage("Index", "BuildingGroup", "Estate", { id : @Model.BuildingGroupId });
            return false;
        });        

        $('a.floor-details').click(function () {
            var request = { buildingId: '@Model.Id', floor: $(this).attr('ref') };
            ajaxLoadPage("Index", "Floor", "Estate", request);
            return false;
        });
    });
</script>
